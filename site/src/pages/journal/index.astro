---
import Base from '../../layouts/Base.astro';
import { getCollection } from 'astro:content';

const base = import.meta.env.BASE_URL.replace(/\/$/, '');
const entries = await getCollection('journal');
entries.sort((a, b) => (a.data.order ?? 0) - (b.data.order ?? 0));
---
<Base title="Journal">
  <main class="index-page">
    <h1>Journal</h1>
    <p class="subtitle">33 entries exploring the gap between description and thing — mathematics, language, music, time.</p>

    <ul class="entry-list">
      {entries.map(entry => (
        <li>
          <a href={`${base}/journal/${entry.slug}`}>
            <span class="entry-title">{entry.data.title}</span>
            <span class="entry-meta">
              {entry.data.threads && entry.data.threads.length > 0
                ? entry.data.threads.join(' · ')
                : ''}
            </span>
          </a>
        </li>
      ))}
    </ul>
  </main>
</Base>
